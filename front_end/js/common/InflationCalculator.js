export class InflationCalculator {
    inflationRates = [[1900, 0.67, 0.01], [1901, 0.67, 0.01], [1902, 0.68, 0.01], [1903, 0.70, 0.02], [1904, 0.71, 0.01], [1905, 0.70, -0.01], [1906, 0.71, 0.02], [1907, 0.75, 0.04], [1908, 0.73, -0.02], [1909, 0.72, -0.01], [1910, 0.75, 0.04], [1911, 0.75, 0.00], [1912, 0.77, 0.02], [1913, 0.79, 0.02], [1914, 0.79, 0.01], [1915, 0.80, 0.01], [1916, 0.87, 0.08], [1917, 1.02, 0.17], [1918, 1.20, 0.18], [1919, 1.37, 0.15], [1920, 1.59, 0.16], [1921, 1.42, -0.11], [1922, 1.33, -0.06], [1923, 1.36, 0.02], [1924, 1.36, 0.00], [1925, 1.39, 0.02], [1926, 1.40, 0.01], [1927, 1.38, -0.02], [1928, 1.36, -0.02], [1929, 1.36, 0.00], [1930, 1.33, -0.02], [1931, 1.21, -0.09], [1932, 1.09, -0.10], [1933, 1.03, -0.05], [1934, 1.06, 0.03], [1935, 1.09, 0.02], [1936, 1.10, 0.01], [1937, 1.14, 0.04], [1938, 1.12, -0.02], [1939, 1.10, -0.01], [1940, 1.11, 0.01], [1941, 1.17, 0.05], [1942, 1.29, 0.11], [1943, 1.37, 0.06], [1944, 1.40, 0.02], [1945, 1.43, 0.02], [1946, 1.55, 0.08], [1947, 1.77, 0.14], [1948, 1.91, 0.08], [1949, 1.89, -0.01], [1950, 1.91, 0.01], [1951, 2.06, 0.08], [1952, 2.10, 0.02], [1953, 2.12, 0.01], [1954, 2.13, 0.01], [1955, 2.13, -0.00], [1956, 2.16, 0.01], [1957, 2.23, 0.03], [1958, 2.29, 0.03], [1959, 2.31, 0.01], [1960, 2.35, 0.02], [1961, 2.37, 0.01], [1962, 2.40, 0.01], [1963, 2.43, 0.01], [1964, 2.46, 0.01], [1965, 2.50, 0.02], [1966, 2.57, 0.03], [1967, 2.65, 0.03], [1968, 2.76, 0.04], [1969, 2.91, 0.05], [1970, 3.08, 0.06], [1971, 3.21, 0.04], [1972, 3.32, 0.03], [1973, 3.52, 0.06], [1974, 3.91, 0.11], [1975, 4.27, 0.09], [1976, 4.52, 0.06], [1977, 4.81, 0.07], [1978, 5.17, 0.08], [1979, 5.76, 0.11], [1980, 6.54, 0.13], [1981, 7.21, 0.10], [1982, 7.66, 0.06], [1983, 7.90, 0.03], [1984, 8.25, 0.04], [1985, 8.54, 0.04], [1986, 8.70, 0.02], [1987, 9.02, 0.04], [1988, 9.39, 0.04], [1989, 9.84, 0.05], [1990, 10.37, 0.05], [1991, 10.81, 0.04], [1992, 11.13, 0.03], [1993, 11.47, 0.03], [1994, 11.76, 0.03], [1995, 12.10, 0.03], [1996, 12.45, 0.03], [1997, 12.74, 0.02], [1998, 12.94, 0.02], [1999, 13.22, 0.02], [2000, 13.67, 0.03], [2001, 14.06, 0.03], [2002, 14.28, 0.02], [2003, 14.60, 0.02], [2004, 14.99, 0.03], [2005, 15.50, 0.03], [2006, 16.00, 0.03], [2007, 16.46, 0.03], [2008, 17.09, 0.04], [2009, 17.03, -0.00], [2010, 17.31, 0.02], [2011, 17.85, 0.03], [2012, 18.22, 0.02], [2013, 18.49, 0.01], [2014, 18.79, 0.02], [2015, 18.81, 0.00], [2016, 19.05, 0.01], [2017, 19.45, 0.02], [2018, 19.94, 0.02], [2019, 20.29, 0.02], [2020, 20.54, 0.01], [2021, 21.51, 0.05], [2022, 23.65, 0.10]]

    constructor(endYear) {
        this.endYear = endYear
    }

    computeInflation(startYear, endYear, amount) {
        const startYearRate = this.inflationRates.find(x => x[0] == startYear)
        const endYearRate = this.inflationRates.find(x => x[0] == endYear)
        const ratio = endYearRate[1] / startYearRate[1]
        return amount * ratio
    }

    computeInflationSimple(startYear, amount) {
        return this.computeInflation(startYear, this.endYear, amount)
    }

    revertInflation(startYear, amount) {
        return this.computeInflation(this.endYear, startYear, amount)
    }

    revertInflaction(moviesList) {
        return moviesList.map(e => {
            e.budget = this.revertInflation(e.release_year, e.budget)
            e.revenue = this.revertInflation(e.release_year, e.revenue)
            return e
        })
    }

    applyInflaction(moviesList) {
        return moviesList.map(e => {
            e.budget = this.computeInflationSimple(e.release_year, e.budget)
            e.revenue = this.computeInflationSimple(e.release_year, e.revenue)
            return e
        })
    }
}

